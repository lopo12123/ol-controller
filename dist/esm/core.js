import"ol/ol.css";import{View as e,Map as r,Feature as o}from"ol";import t from"ol/layer/Tile";import{XYZ as n,OSM as s,Raster as a,Cluster as l}from"ol/source";import i from"ol/layer/Vector";import c from"ol/source/Vector";import{GeoJSON as y}from"ol/format";import{Style as m,Icon as h,Stroke as d,Fill as w,Text as f}from"ol/style";import{Point as p,Polygon as k,LineString as u}from"ol/geom";import{useGeographic as g}from"ol/proj";import T from"ol/style/Circle";import x from"ol/layer/Image";var A;!function(e){e.stroke="#39c",e[e.strokeWidth=2]="strokeWidth",e.fill="transparent",e.IconFill="#39c",e.IconStroke="#fff",e.IconTextColor="#fff"}(A||(A={})),g();const S=(o,l)=>{let i;if(i=l?.base&&l.base.length>0?l.base.map((e=>new t({source:new n({crossOrigin:e.crossOrigin,url:e.src}),extent:e.extent}))):[new t({source:new s})],l?.raster){const t=new a({sources:i,operationType:l.raster.operationType,operation:l.raster.operation}),n={target:o,layers:[new x({source:t})],view:new e({center:l?.center??[0,0],projection:l?.projection??"EPSG:4326",zoom:l?.zoom??7,minZoom:Math.max(2,l?.minZoom??0),maxZoom:Math.min(20,l?.maxZoom??20)})};return new r(n)}{const t={target:o,layers:i,view:new e({center:l?.center??[0,0],projection:l?.projection??"EPSG:4326",zoom:l?.zoom??7,minZoom:Math.max(2,l?.minZoom??0),maxZoom:Math.min(20,l?.maxZoom??20)}),controls:[]};return new r(t)}},W=(e,r)=>{const t=new c,n=new i({source:t});return e.forEach((e=>{const n=new o({type:"point",geometry:new p(e.anchor),self:e});n.setStyle(new m({image:new h({anchor:[.5,.5],scale:1,anchorXUnits:"fraction",anchorYUnits:"fraction",src:e.icon??r})})),t.addFeature(n)})),n},C=(e,r,t,n,s)=>{const a=e.map((e=>new o({type:"point_cluster",geometry:new p(e.anchor),self:e}))),y=new c({features:a}),k=new l({distance:t,minDistance:n,source:y}),u={};return new i({source:k,style:e=>{const o=e.get("features").length;let t=u[o];return t||(t=((e,r,o)=>{const t="function"==typeof o?.text?o.text(e):o?.text??e.toString();return new m({image:!1===o?.hideIcon?r:new T({radius:o?.radius??10,stroke:new d({color:o?.borderColor??A.IconStroke}),fill:new w({color:o?.backgroundColor??A.IconFill})}),text:new f({text:t,fill:new w({color:o?.textColor??A.IconTextColor})})})})(o,new h({anchor:[.5,.5],scale:1,anchorXUnits:"fraction",anchorYUnits:"fraction",src:r}),s),u[o]=t),t}})},I=(e,r)=>("dashed"!==r?.strokeType||r?.dashArray||console.warn('[OlController] The "style.StrokeType" will not function as "style.dashArray" is in invalid format.'),new i({source:new c({url:e,format:new y}),style:new m({stroke:new d({color:r?.stroke??A.stroke,width:r?.strokeWidth??A.strokeWidth,lineDash:"dashed"===r?.strokeType?r?.dashArray??[0,0]:[0,0]}),fill:new w({color:r?.fill??A.fill})})})),M=(e,r)=>{"dashed"!==r?.strokeType||r?.dashArray||console.warn('[OlController] The "style.StrokeType" will not function as "style.dashArray" is in invalid format.');const t=new c,n=new i({source:t});return e.forEach((e=>{const n=new o({type:"polygon",geometry:new k([e.path]),self:e});let s=[0,0];"dashed"===e.style?.strokeType&&e.style.dashArray?s=e.style.dashArray:!e.style?.strokeType&&"dashed"===r?.strokeType&&r.dashArray&&(s=r.dashArray),n.setStyle(new m({stroke:new d({color:e.style?.stroke??r?.stroke??A.stroke,width:e.style?.strokeWidth??r?.strokeWidth??A.strokeWidth,lineDash:s}),fill:new w({color:e.style?.fill??r?.fill??A.fill})})),t.addFeature(n)})),n},Z=(e,r)=>{"dashed"!==r?.strokeType||r?.dashArray||console.warn('[OlController] The "style.StrokeType" will not function as "style.dashArray" is in invalid format.');const t=new c,n=new i({source:t});return e.forEach((e=>{const n=new o({type:"polyline",geometry:new u(e.path),self:e});let s=[0,0];if("dashed"===e.style?.strokeType&&e.style.dashArray?s=e.style.dashArray:!e.style?.strokeType&&"dashed"===r?.strokeType&&r.dashArray&&(s=r.dashArray),n.setStyle(new m({stroke:new d({color:e.style?.stroke??r?.stroke??A.stroke,width:e.style?.strokeWidth??r?.strokeWidth??A.strokeWidth,lineDash:s})})),r?.startMarker){const n=new o({type:"start-marker",geometry:new p(e.path[0])});n.setStyle(new m({image:new h({anchor:[.5,.5],src:r.startMarker})})),t.addFeature(n)}if(r?.endMarker){const n=new o({type:"end-marker",geometry:new p(e.path[0])});n.setStyle(new m({image:new h({anchor:[.5,.5],scale:1,anchorXUnits:"fraction",anchorYUnits:"fraction",src:r.endMarker})})),t.addFeature(n)}t.addFeature(n)})),n};export{C as create_point_cluster_layer,W as create_point_layer,I as create_polygon_layer__GeoJson,M as create_polygon_layer__PathArray,Z as create_polyline_layer,S as create_tile_map__xyz};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29yZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vbGliL2NvcmUudHMiXSwic291cmNlc0NvbnRlbnQiOltudWxsXSwibmFtZXMiOlsiVXNlRGVmYXVsdCIsInVzZUdlb2dyYXBoaWMiLCJjcmVhdGVfdGlsZV9tYXBfX3h5eiIsImVsIiwib3B0aW9ucyIsImJhc2VfbGF5ZXJzIiwiYmFzZSIsImxlbmd0aCIsIm1hcCIsInNpbmdsZSIsIlRpbGVMYXllciIsInNvdXJjZSIsIlhZWiIsImNyb3NzT3JpZ2luIiwidXJsIiwic3JjIiwiZXh0ZW50IiwiT1NNIiwicmFzdGVyIiwiUmFzdGVyIiwic291cmNlcyIsIm9wZXJhdGlvblR5cGUiLCJvcGVyYXRpb24iLCJtYXBfb3B0aW9uIiwidGFyZ2V0IiwibGF5ZXJzIiwiSW1hZ2VMYXllciIsInZpZXciLCJWaWV3IiwiY2VudGVyIiwicHJvamVjdGlvbiIsInpvb20iLCJtaW5ab29tIiwiTWF0aCIsIm1heCIsIm1heFpvb20iLCJtaW4iLCJPbE1hcCIsImNvbnRyb2xzIiwiY3JlYXRlX3BvaW50X2xheWVyIiwicG9pbnRzIiwiaWNvbiIsIlZlY3RvclNvdXJjZSIsImxheWVyIiwiVmVjdG9yTGF5ZXIiLCJmb3JFYWNoIiwicG9pbnQiLCJwb2ludF9mZWF0dXJlIiwiRmVhdHVyZSIsInR5cGUiLCJnZW9tZXRyeSIsIlBvaW50IiwiYW5jaG9yIiwic2VsZiIsInNldFN0eWxlIiwiU3R5bGUiLCJpbWFnZSIsIkljb24iLCJzY2FsZSIsImFuY2hvclhVbml0cyIsImFuY2hvcllVbml0cyIsImFkZEZlYXR1cmUiLCJjcmVhdGVfcG9pbnRfY2x1c3Rlcl9sYXllciIsImRpc3RhbmNlIiwibWluRGlzdGFuY2UiLCJjbHVzdGVyU3R5bGUiLCJmZWF0dXJlcyIsImNsdXN0ZXJfc291cmNlIiwiQ2x1c3RlciIsInN0eWxlQ2FjaGUiLCJzdHlsZSIsImZlYXR1cmVfZ3JvdXAiLCJzaXplIiwiZ2V0IiwibnVtIiwib3JpZ2luSWNvbiIsInRleHRUb1Nob3ciLCJ0ZXh0IiwidG9TdHJpbmciLCJoaWRlSWNvbiIsIkNpcmNsZVN0eWxlIiwicmFkaXVzIiwic3Ryb2tlIiwiU3Ryb2tlIiwiY29sb3IiLCJib3JkZXJDb2xvciIsIkljb25TdHJva2UiLCJmaWxsIiwiRmlsbCIsImJhY2tncm91bmRDb2xvciIsIkljb25GaWxsIiwiVGV4dCIsInRleHRDb2xvciIsIkljb25UZXh0Q29sb3IiLCJjbHVzdGVyU3R5bGVHZW5lcmF0b3IiLCJjcmVhdGVfcG9seWdvbl9sYXllcl9fR2VvSnNvbiIsImdlb2pzb24iLCJzdHJva2VUeXBlIiwiZGFzaEFycmF5IiwiY29uc29sZSIsIndhcm4iLCJmb3JtYXQiLCJHZW9KU09OIiwid2lkdGgiLCJzdHJva2VXaWR0aCIsImxpbmVEYXNoIiwiY3JlYXRlX3BvbHlnb25fbGF5ZXJfX1BhdGhBcnJheSIsInBvbHlnb25zIiwicG9seWdvbiIsInBvbHlnb25fZmVhdHVyZSIsIlBvbHlnb24iLCJwYXRoIiwiZGFzaCIsImNyZWF0ZV9wb2x5bGluZV9sYXllciIsInBvbHlsaW5lcyIsInBvbHlsaW5lIiwicG9seWxpbmVfZmVhdHVyZSIsIkxpbmVTdHJpbmciLCJzdGFydE1hcmtlciIsInN0YXJ0IiwiZW5kTWFya2VyIiwiZW5kIl0sIm1hcHBpbmdzIjoiaWZBaUJBLElBQVdBLEdBQVgsU0FBV0EsR0FDUEEsRUFBQSxPQUFBLE9BQ0FBLEVBQUFBLEVBQUEsWUFBQSxHQUFBLGNBQ0FBLEVBQUEsS0FBQSxjQUNBQSxFQUFBLFNBQUEsT0FDQUEsRUFBQSxXQUFBLE9BQ0FBLEVBQUEsY0FBQSxPQU5KLENBQVdBLElBQUFBLEVBT1YsS0FHREMsSUE0REEsTUFBTUMsRUFBdUIsQ0FDekJDLEVBQ0FDLEtBQ0EsSUFBSUMsRUFtQkosR0FoQklBLEVBRENELEdBQVNFLE1BQVFGLEVBQVFFLEtBQUtDLE9BQVMsRUFDMUJILEVBQVFFLEtBQUtFLEtBQUlDLEdBQVUsSUFBSUMsRUFBVSxDQUNuREMsT0FBUSxJQUFJQyxFQUFJLENB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
